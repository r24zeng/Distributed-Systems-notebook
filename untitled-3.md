# 5.经典架构

## 架构的必要特征：

* 各部件的交互接口（可替代性）
* 各部件间的连接方式
* 各部件间的数据交换
* 部件及连接者在系统中的配置（连接者：一种帮助各部件间联系的机制，例如远程呼叫，消息形式，流形式）

## 三种层级架构：

1. 信息一层层传递（例如广播）
2. 一部分信息存储起来，一部分信息传给中间层处理回应（例如网站）
3. 一层处理所有任务，比如存储和回应

## 经典的三层架构：

1. 应用交互层：与用户和其他应用交互
2. 处理层：仅含有处理函数
3. 数据层：用户想要操作的数据

## 分布式架构实例：

1. 简单的搜索引擎
   * 用户请求 -&gt; 生成问询 -&gt; 网页数据库 -&gt; 携带元信息的网页 -&gt; 排名算法 -&gt; HTML 生成新的页面 -&gt; 返回给用户
2. 基于对象的样式
   * 每个部件都是对象，通过远程调用联系起来，通过网络使这些可能在不同机器上的部件协作，不暴露里面的工作机制
   * 不是很有名，因为分散在不同机器上的对象造成严重的延迟
3. RESTfull 架构
   * 基本操作：PUT, GET, DELETE, POST
   * 所有的服务器都是一样的功能，消息在传递的时候就已经打包好了并描述详细，所有的操作都在服务端，对象会忘记所有调用
   * 难以申明状态。例如Amazon的存储系统，操作非常简单；Amazon S3 SOAP，调用的状态会返回，这样就知道哪里出错了

**RESTfull例子： Amazon 简易的存储服务**

* 全称是 Resource Representational State Transfer：通俗来讲就是：资源在网络中以某种表现形式进行状态转移。分解开来：Resource：资源，即数据（前面说过网络的核心）。比如 newsfeed，friends等；Representational：某种表现形式，比如用JSON，XML，JPEG等；State Transfer：状态变化。通过HTTP动词实现。
* 所有的文件都放在文件夹里，文件夹里不能放文件夹
* 所有的操作都通过HTTP完成

## 架构中协作的种类

**暂时耦合**：如电话系统，也叫直接合作，A和B同时在线沟通； **参照耦合**：如电话系统，也叫直接合作，A必须知道对方的地址。

**参照解耦**：如数据分享系统，检索信息时不知道信息在哪，仅有匹配的信息会被筛选出来进一步处理； **暂时解耦**：如数据分享系统，不要求同步，只要匹配就可以检索到数据。

**暂时解耦**：如邮件系统，双方不需要同时在线； **参照耦合**：如邮件系统，必须知道对方地址信息

**参照解耦**：如事件合作，不需要知道消息的地址，因为消息会被分不到不同的服务器； **暂时耦合**：如事件合作，处理事件时，必须同时在线

参照：意思是指是否需要知道对方的地址

暂时：意思是指是否需要同时在线

耦合：意思是需要绑定，同时做什么或者知道对方地址。

